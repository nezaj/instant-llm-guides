# InstantDB Initialization Guide

This guide explains how to initialize an InstantDB project in your application, including how to obtain your app ID using the Instant CLI.

## Getting Your App ID

Before initializing InstantDB in your application, you need to obtain an app ID. The recommended way to do this is using the Instant CLI:

```bash
npx instant-cli@latest init
```

This command will:
1. Guide you through picking an Instant app
2. Generate two essential files:
   - `instant.schema.ts` - defines your application's data model
   - `instant.perms.ts` - defines your permission rules
3. Set up your app ID, which you'll need for initialization

After running the init command, your app ID will be available for use in your environment variables.

## Environment Variables for App ID

The Instant CLI supports multiple environment variable names for storing your app ID:

- `INSTANT_APP_ID` - default for all applications
- `NEXT_PUBLIC_INSTANT_APP_ID` - for Next.js apps
- `PUBLIC_INSTANT_APP_ID` - for Svelte apps
- `VITE_INSTANT_APP_ID` - for Vite apps
- `NUXT_PUBLIC_INSTANT_APP_ID` - for Nuxt apps
- `EXPO_PUBLIC_INSTANT_APP_ID` - for Expo apps

Choose the appropriate variable name based on your framework.

## Initializing InstantDB in Your Application

Once you have your app ID, you can initialize InstantDB in your application. Here's a basic example:

```javascript
import { init } from '@instantdb/react';

const db = init({ appId: process.env.INSTANT_APP_ID });

function App() {
  return <Main />;
}
```

### Adding TypeScript Support

For TypeScript applications, add the schema argument to enable auto-completion and type safety:

```typescript
import { init } from '@instantdb/react';
import schema from './instant.schema';

const db = init({ 
  appId: process.env.INSTANT_APP_ID,
  schema 
});
```

The `schema` file is automatically generated by the CLI during the init process.

### Recommended Pattern: Central DB Instance

While Instant maintains a single connection regardless of how many times you call `init` with the same app ID, it's recommended to create a central DB instance:

```typescript
// lib/db.ts
import { init } from '@instantdb/react';
import schema from '../instant.schema';

export const db = init({
  appId: process.env.INSTANT_APP_ID,
  schema
});
```

This pattern allows you to import the same DB instance throughout your application.

## Updating Your Schema and Permissions

After initial setup, you can modify your data model and permissions:

1. Edit `instant.schema.ts` to update your data model
2. Edit `instant.perms.ts` to update your permission rules
3. Push changes to production:

```bash
# Push schema changes
npx instant-cli@latest push schema

# Push permission changes
npx instant-cli@latest push perms
```

